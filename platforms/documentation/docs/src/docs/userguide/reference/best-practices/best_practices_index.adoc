// Copyright (C) 2025 Gradle, Inc.
//
// Licensed under the Creative Commons Attribution-Noncommercial-ShareAlike 4.0 International License.;
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      https://creativecommons.org/licenses/by-nc-sa/4.0/
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[[best_practices_index]]
= Best Practices Index

The table below provides a complete list of documented Gradle Best Practices.

****
There are currently *<span id="best-practices-total">X</span> Best Practices*<span id="best-practices-filtered-text"></span>.
****

Use this as a quick reference to track newly added recommendations, check adoption status, or explore areas for improving your build:

++++
<div style="margin: 10px 0;">
  <label for="section-filter" style="margin-right: 10px;">Filter by Section:</label>
  <select id="section-filter" style="margin-right: 20px;">
    <option value="">All Sections</option>
  </select>
  <label for="version-filter" style="margin-right: 10px;">Filter by Version:</label>
  <select id="version-filter">
    <option value="">All Versions</option>
  </select>
</div>
++++

[.table]
[#best-practices-table]
|===
| Title | Section | Added in Gradle Version

| <<best_practices_general.adoc#use_kotlin_dsl,Use Kotlin DSL>> | General | 8.14
| <<best_practices_general.adoc#use_latest_minor_versions,Use the Latest Minor Version of Gradle>> | General | 8.14
| <<best_practices_general.adoc#use_the_plugins_block,Apply Plugins Using the plugins Block>> | General | 8.14
| <<best_practices_general.adoc#do_not_use_internal_apis,Do Not Use Internal APIs>> | General | 8.14
| <<best_practices_general.adoc#use_the_gradle_properties_file,Set build flags in gradle.properties>> | General | 9.0.0
| <<best_practices_general.adoc#name_your_root_project,Name Your Root Project>> | General | 9.2.0
| <<best_practices_general.adoc#do_not_use_gradle_properties_in_subprojects,Do not use gradle.properties in subprojects>> | General | 9.2.0

| <<best_practices_structuring_builds.adoc#modularize_builds,Modularize Your Builds>> | Structuring Builds | 9.0.0
| <<best_practices_structuring_builds.adoc#no_source_in_root,Do Not Put Source Files in the Root Project>> | Structuring Builds | 9.0.0
| <<best_practices_structuring_builds.adoc#favor_composite_builds,Favor build-logic Composite Builds for Build Logic>> | Structuring Builds | 9.0.0
| <<best_practices_structuring_builds.adoc#avoid_empty_projects,Avoid Unintentionally Creating Empty Projects>> | Structuring Builds | 9.1.0
| <<best_practices_structuring_builds.adoc#use_convention_plugins,Use Convention Plugins>> | Structuring Builds | 9.3.0

| <<best_practices_dependencies.adoc#single-gav-string,Single GAV String>> | Dependencies | 8.14
| <<best_practices_dependencies.adoc#use_version_catalogs,Use Version Catalogs to Centralize Dependency Versions>> | Dependencies | 9.0.0
| <<best_practices_dependencies.adoc#name_version_catalog_entries,Name Version Catalog Entries Appropriately>> | Dependencies | 9.0.0
| <<best_practices_dependencies.adoc#set_up_repositories_in_settings,Set up your Dependency Repositories in the Settings file>> | Dependencies | 9.0.0
| <<best_practices_dependencies.adoc#dont_depend_on_kotlin_stdlib,Don’t Explicitly Depend on the Kotlin Standard Library>> | Dependencies | 9.0.0
| <<best_practices_dependencies.adoc#avoid_duplicate_dependencies,Avoid Redundant Dependency Declarations>> | Dependencies | 9.0.0
| <<best_practices_dependencies.adoc#use_content_filtering,Use Content Filtering with multiple Repositories>> | Dependencies | 9.1.0
| <<best_practices_dependencies.adoc#apply_exclusions_narrowly,Apply Exclusions Narrowly>> | Dependencies | 9.2.0

| <<best_practices_tasks.adoc#avoid_depends_on,Avoid DependsOn>> | Task | 8.14
| <<best_practices_tasks.adoc#use_cacheability_annotations, Favor @CacheableTask and @DisableCachingByDefault over cacheIf(Spec) and doNotCacheIf(String, Spec)>> | Task | 8.14
| <<best_practices_tasks.adoc#group_describe_tasks,Group and Describe custom Tasks>> | Task | 9.0.0
| <<best_practices_tasks.adoc#avoid_provider_get_outside_task_action,Do not call `get()` on a Provider outside a Task action>> | Task | 9.1.0
| <<best_practices_tasks.adoc#dont_resolve_configurations_before_task_execution,Don't resolve Configurations before Task Execution>> | Task | 9.1.0
| <<best_practices_tasks.adoc#avoid_eager_file_collection_apis,Avoid using eager APIs on File Collections>> | Task | 9.1.0
| <<best_practices_tasks.adoc#default_path_sensitivities,Prefer `@PathSensitivity.NONE` for file inputs and `@PathSensitivity.RELATIVE` for directories>> | Task | 9.2.0

| <<best_practices_performance.adoc#use_utf8_encoding,Enable UTF‑8>> | Performance | 9.0.0
| <<best_practices_performance.adoc#use_build_cache,Use the Build Cache>> | Performance | 9.1.0
| <<best_practices_performance.adoc#use_configuration_cache,Use the Configuration Cache>> | Performance | 9.1.0
| <<best_practices_performance.adoc#avoid_computations_in_configuration_phase,Avoid Expensive Computations in Configuration Phase>> | Performance | 9.0.0
| <<best_practices_performance.adoc#prefer_bin_distribution,Prefer the `-bin` Gradle Distribution>> | Performance | 9.4.0

| <<best_practices_security.adoc#best_practices_for_security,Validate the Gradle Distribution SHA-256 Checksum>> | Security | 9.1.0
| <<best_practices_security.adoc#validate_wrapper_checksum,Validate the Gradle Wrapper on every Upgrade>> | Security | 9.3.0
|===

++++
<script>
(function() {
  'use strict';
  
  // Wait for the DOM to be fully loaded
  function init() {
    const table = document.getElementById('best-practices-table');
    if (!table) {
      console.error('Best Practices table not found');
      return;
    }
    
    const tbody = table.querySelector('tbody');
    const thead = table.querySelector('thead');
    
    if (!tbody || !thead) {
      console.error('Table body or header not found');
      return;
    }
    
    // Get all data rows (excluding header)
    const allRows = Array.from(tbody.querySelectorAll('tr'));
    
    // Extract unique sections and versions
    const sections = new Set();
    const versions = new Set();
    
    allRows.forEach(row => {
      const cells = row.querySelectorAll('td');
      if (cells.length >= 3) {
        sections.add(cells[1].textContent.trim());
        versions.add(cells[2].textContent.trim());
      }
    });
    
    // Populate filter dropdowns
    const sectionFilter = document.getElementById('section-filter');
    const versionFilter = document.getElementById('version-filter');
    
    if (sectionFilter && versionFilter) {
      Array.from(sections).sort().forEach(section => {
        const option = document.createElement('option');
        option.value = section;
        option.textContent = section;
        sectionFilter.appendChild(option);
      });
      
      Array.from(versions).sort().forEach(version => {
        const option = document.createElement('option');
        option.value = version;
        option.textContent = version;
        versionFilter.appendChild(option);
      });
      
      // Add filter event listeners
      sectionFilter.addEventListener('change', applyFilters);
      versionFilter.addEventListener('change', applyFilters);
    }
    
    // Add sorting functionality to header cells
    const headerCells = thead.querySelectorAll('th');
    headerCells.forEach((header, index) => {
      header.style.cursor = 'pointer';
      header.style.userSelect = 'none';
      header.title = 'Click to sort';
      
      // Add a visual indicator
      const indicator = document.createElement('span');
      indicator.style.marginLeft = '5px';
      indicator.style.fontSize = '0.8em';
      indicator.textContent = '⇅';
      header.appendChild(indicator);
      
      let ascending = true;
      header.addEventListener('click', function() {
        sortTable(index, ascending);
        ascending = !ascending;
        
        // Update all indicators
        headerCells.forEach(h => {
          const ind = h.querySelector('span');
          if (ind) ind.textContent = '⇅';
        });
        
        // Update current indicator
        indicator.textContent = ascending ? '▼' : '▲';
      });
    });
    
    // Initial count update
    updateCount();
    
    function applyFilters() {
      const selectedSection = sectionFilter.value;
      const selectedVersion = versionFilter.value;
      
      allRows.forEach(row => {
        const cells = row.querySelectorAll('td');
        if (cells.length >= 3) {
          const section = cells[1].textContent.trim();
          const version = cells[2].textContent.trim();
          
          const sectionMatch = !selectedSection || section === selectedSection;
          const versionMatch = !selectedVersion || version === selectedVersion;
          
          if (sectionMatch && versionMatch) {
            row.style.display = '';
          } else {
            row.style.display = 'none';
          }
        }
      });
      
      updateCount();
    }
    
    function sortTable(columnIndex, ascending) {
      const visibleRows = allRows.filter(row => row.style.display !== 'none');
      
      visibleRows.sort((a, b) => {
        const aCell = a.querySelectorAll('td')[columnIndex];
        const bCell = b.querySelectorAll('td')[columnIndex];
        
        if (!aCell || !bCell) return 0;
        
        const aText = aCell.textContent.trim();
        const bText = bCell.textContent.trim();
        
        // Try numeric comparison for version numbers
        const aNum = parseFloat(aText);
        const bNum = parseFloat(bText);
        
        if (!isNaN(aNum) && !isNaN(bNum)) {
          return ascending ? aNum - bNum : bNum - aNum;
        }
        
        // String comparison
        if (ascending) {
          return aText.localeCompare(bText);
        } else {
          return bText.localeCompare(aText);
        }
      });
      
      // Reorder rows in the table
      visibleRows.forEach(row => tbody.appendChild(row));
    }
    
    function updateCount() {
      const totalCount = allRows.length;
      const visibleCount = allRows.filter(row => row.style.display !== 'none').length;
      const totalElement = document.getElementById('best-practices-total');
      const filteredTextElement = document.getElementById('best-practices-filtered-text');
      
      if (totalElement) {
        totalElement.textContent = totalCount;
      }
      
      if (filteredTextElement) {
        if (visibleCount < totalCount) {
          filteredTextElement.textContent = ` (${visibleCount} displayed)`;
        } else {
          filteredTextElement.textContent = '';
        }
      }
    }
  }
  
  // Run initialization when the page loads
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>
++++
