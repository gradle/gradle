// Copyright (C) 2025 Gradle, Inc.
//
// Licensed under the Creative Commons Attribution-Noncommercial-ShareAlike 4.0 International License.;
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      https://creativecommons.org/licenses/by-nc-sa/4.0/
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[[best_practices_for_security]]
= Best Practices for Security

[[validate_gradle_checksum]]
== Validate the Gradle Distribution SHA-256 Checksum

Set `distributionSha256Sum` in `gradle-wrapper.properties` to verify the integrity of the downloaded Gradle distribution.

=== Explanation

Always set the `distributionSha256Sum` property in your `gradle-wrapper.properties` file to verify the integrity of the downloaded Gradle distribution.
This ensures the `gradle-X.X-bin.zip` file matches the official SHA-256 checksum published by Gradle, protecting your build from corruption or tampering.

[source,properties]
----
distributionUrl=https\://services.gradle.org/distributions/gradle-8.6-bin.zip
distributionSha256Sum=2b3f4...sha256-here...f4511
----

This validation step enhances security by preventing the execution of compromised or incomplete Gradle distributions.

The official SHA-256 checksums can be found on the link:https://gradle.org/releases/[Gradle releases page].

=== References

- link:https://gradle.org/releases/[Gradle Releases with Checksums]
- <<gradle_wrapper.adoc#gradle_wrapper,Gradle Wrapper Reference>>

=== Tags

`<<tags_reference.adoc#tag:properties,#properties>>`, `<<tags_reference.adoc#tag:wrapper,#wrapper>>`

[[build-published-artifacts-securely]]
== Build your Published Artifacts Securely

Ensure that published artifacts are built in a trusted, reproducible way to protect your software supply chain.

=== Explanation

For a project to be trustworthy, its published artifacts must be reproducible. 
This means that a clean build from a given set of source files will always produce a byte-for-byte identical output, regardless of when or where the build is executed. 
To achieve this, the build process must be isolated from any external state that could influence the final artifact.

When preparing a project for publishing, it is critical to use a secure, isolated, and non-incremental build process. This prevents potential security risks and ensures that the published artifact is a direct and verifiable result of the source code.
that contains minimal infrastructure, such as only the JDK.

==== Don't Do This

Do not use incremental, local, or cached builds when publishing. 
These methods rely on the outputs of previous builds, which can introduce a security vector. 
An incremental build might use a leftover artifact from an older, potentially compromised, build. 
Similarly, using a remote build cache or other caching mechanisms can lead to accidental inclusion of outdated or malicious content, resulting in a non-reproducible artifact. 
The build output would then be dependent on the state of the machine it was run on, undermining the integrity of your software.

==== Do This Instead

Published artifacts should always be built in a trusted, pristine environment. 
The best way to achieve this is by using a fresh, isolated, and temporary CI machine. 
This approach, often referred to as *Ephemeral CI*, guarantees that the build starts from a clean slate every time, with no lingering artifacts, caches, or other external state.

=== Tags

<<tags_reference.adoc:structuring-builds,#structuring-builds>>
